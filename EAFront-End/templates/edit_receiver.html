{% extends "layout.html" %}
{% block title %}
Editar Beneficiario
{% endblock %}
{% block content %}
    <!--Formulario-->

      <form action="" id="actualizar" method="post">
        <input type="hidden" name="id_receiver" value="{{ receiver['id_receiver'] }}">
                <div class="container" style="margin-top: 70px; margin-bottom: 70px;">
        <div class="row">
          <div class="col-md-2"style="display:flex; align-items: center; justify-content: center;">
           <img class="img-responsive" src="img/viejitos.png" >
         </div>
          <div class="col-md-8">
            <div class="card shadow-lg rounded">
              <div class="card-header text-center" style="background-color:rgb(60,180,173);color: #fff;font-family: 'Segoe UI Emoji';font-size: 1.2rem;">Actualiza datos<br>
                <p>de Beneficiario</p>
              </div>
            <div class="card-body"></div>
              <div class="row col-md-12">
                <div style="text-align: right; min-height: 60px" class="container col-md-6">
                  <label style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">Asignar Beneficiario a Evento(s):</label>
                </div>
                <div class="container col-md-6">
                  <select name="events" id="events" class="form-control"  multiple="multiple" style="display: none;">
                    {% for row in e_list %}
                    <option value="{{row['id_event']}}">{{row['name']}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="row col-md-12">
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">NOMBRE(S)</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-sm">*</span>
                    </div>
                    <input  name="given_name" value="{{ receiver['given_name'] }}" type="text" class="form-control" placeholder="NOMBRE (S)" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">1er APELLIDO</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-sm">*</span>
                    </div>
                    <input name="last_name" value="{{ receiver['last_name'] }}" type="text" class="form-control" placeholder="1er APELLIDO" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
              </div>
              <div class="row col-md-12">
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">2do APELLIDO</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-sm">*</span>
                    </div>
                    <input name="s_last_name" value="{{ receiver['s_last_name'] if receiver['s_last_name'] is not none}}" type="text" class="form-control" placeholder="2do APELLIDO" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">CORREO ELECTRONICO</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                    </div>
                    <input name="email" value="{{ receiver['email'] if receiver['email'] != None }}" type="text" class="form-control" placeholder="CORREO ELECTRONICO" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
              </div>
              <div class="row col-md-12">
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">TELEFONO 1</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-sm">*</span>
                    </div>
                    <input name="p_phone"  value="{{ receiver['p_phone'] if receiver['p_phone'] != None }}" type="text" class="form-control" placeholder="TELEFONO 1" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">TELEFONO 2</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                    </div>
                    <input name="s_phone" value="{{ receiver['s_phone'] if receiver['s_phone'] != None }}" type="text" class="form-control" placeholder="TELEFONO 2" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
              </div>
              <div class="row col-md-12">
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">CURP</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-sm">*</span>
                    </div>
                    <input name="curp" value="{{ receiver['curp'] }}" type="text" class="form-control" placeholder="CURP" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
                <div class="container col-md-6">
                  <label for="inputchange" style="font-family: 'Segoe UI Emoji';color: rgb(30,99,109);">CODIGO POSTAL</label>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                    </div>
                    <input name="zip_code" value="{{ receiver['zip_code'] if receiver['zip_code'] != None }}" type="text" class="form-control" placeholder="CODIGO POSTAL" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                  </div>
                </div>
              </div>
              <div class="row col-md-12">
                <div class="container col-md-6 ">

                </div>
                <div class="container col-md-6">
                  <div class="dropdown">
                   <a class="text-right col-sm-11" style="font-family:'Segoe UI Emoji'; font-size: .8rem; color: #777;margin-top: 10px; margin-bottom: 10px;">* Campo obligatorio</a>

                  </div>
                </div>
              </div>
              <div class="card-footer" style="background-color:#fff;">
                <div class="row col-md-12" style="margin-top: 10px; margin-bottom: 10px;">
                  <div class=" container col-md-3">
                    <button type="submit" class="btn btn-secondary btn-block btn-md" style="  margin-bottom: 15px;color: #fff;	background-color: rgb(60,180,173);">Actualizar</button>
                  </div>
                  <div class=" container col-md-3">
                    <a type="button" class="btn btn-danger btn-block btn-md" href="">Cancelar</a>
                  </div>
                </div>
 </div>
 </div>
 </div>
            </div>
          </div>
          <div class="col-md-2"></div>
      </form>
<script type="text/javascript">
    $(document).ready(function () {
      $("#events").bsMultiSelect();
    $('#actualizar').submit( function(event){
        event.preventDefault();
        var form = $('#actualizar');
        var url = form.attr('action');

        $.ajax({
       type: "POST",
       url: url,
       data: form.serialize(), // serializes the form's elements.
       complete: function(data)
       {
         console.log(data)
           $.each(data.responseJSON.msg, function( index, value){
               $('#md-message').append("- " + value + "</br>");
           });

           $('#msgsModal').modal('show');
       }
     });
    });
    });
</script>
          <!--Termina codigo Formulario-->
  {% endblock %}